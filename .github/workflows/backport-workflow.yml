name: Backport changes

env:
  GH_TOKEN: ${{ secrets.DEVOPSHAZELCAST_PAT_FOR_MONOREPO }}
  GH_TOKEN_OUTER: ${{ secrets.DEVOPSHAZELCAST_PAT_FOR_MONOREPO }}
  GH_TOKEN_OUTER_2: ${{ secrets.GH_PAT }}
  GH_TOKEN_OUTER_3: ${{ secrets.DOCKERHUB_USERNAME }}

on:
  workflow_call:

jobs:
  backport:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4
        with:
          # ensure the backport target branch is checked out, too
          fetch-depth: 0
          ref: v/5.5

      - uses: hazelcast/backport/.github/actions/backport@master
        with:
          GITHUB_TOKEN: ${{ secrets.DEVOPSHAZELCAST_PAT_FOR_MONOREPO }}
          TARGET_BRANCH: main
          REF_TO_BACKPORT: 2afb632fc920901bad5c2b78476e8d189296d965
          BACKPORT_OPTIONS: --omit-labels
