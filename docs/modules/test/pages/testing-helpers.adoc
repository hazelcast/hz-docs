= Summary of helper methods

*NOTE: WE NEED TO AGREE WHAT METHODS WE WANT TO ENDORSE AND WHAT NOT. WHAT ARE THE METHODS THAT MAY BE USEFUL TO USERS?*

The following tables document the available helper methods in Hazelcast.
Member methods are available only when the test class inherits the respective support class, hence only in JUnit 4, static methods can also be used in other frameworks.

== Configuration Helpers

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `smallInstanceConfig`               | yes     | HazelcastTestSupport     | Returns a compact Config with reduced threads but with Jet and metrics enabled.

| `smallInstanceConfigWithoutJetAndMetrics` | yes | HazelcastTestSupport   | Returns a compact Config with Jet and metrics disabled and minimal threads.

| `shrinkInstanceConfig`              | yes     | HazelcastTestSupport     | Applies minimal threads, with Jet and metrics enabled, to a given Config.

| `regularInstanceConfig`             | yes     | HazelcastTestSupport     | Returns a default Config with Jet enabled.

| `withoutNetworkJoin`                | yes     | HazelcastTestSupport     | Modifies a given Config to disable all network join mechanisms (TCP/IP and autodetection).

| `getConfig`                         | no      | HazelcastTestSupport     | Returns the default “regular” configuration for tests.
|===

== Lifecycle & Shutdown

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `shutdownNodeFactory`               | no      | HazelcastTestSupport     | Logs and forcibly terminates all instances created by the internal factory after each test.

| `shutdownGracefullyNodeFactory`     | no      | HazelcastTestSupport     | Logs and gracefully shuts down all instances created by the internal factory.
|===

== Instance & Factory Creation

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `createHazelcastInstance`           | no      | HazelcastTestSupport     | Creates a single-node Hazelcast cluster using the default config or a provided Config.

| `createHazelcastInstances`          | no      | HazelcastTestSupport     | Creates a cluster of N members using the default config or a provided Config.

| `createHazelcastInstanceFactory`    | no      | HazelcastTestSupport     | Initializes the internal factory (overloads for node count, address list, initial port).
|===

== Packet & No-Op Utilities

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `toPacket`                          | yes     | HazelcastTestSupport     | Serializes an Operation from one instance and wraps it in a Packet for delivery.

| `ignore`                            | yes     | HazelcastTestSupport     | No-op that swallows a given Throwable.
|===

== Threading & Concurrency Utilities

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `spawn`                             | yes     | HazelcastTestSupport     | Runs a RunnableEx, Runnable, or Callable in a new thread, returning a Future.

| `interruptCurrentThread`            | yes     | HazelcastTestSupport     | Schedules an interrupt of the current thread after a specified delay.
|===

== Sleep & Timing Helpers

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `sleepMillis`                       | yes     | HazelcastTestSupport     | Sleeps for the specified number of milliseconds, swallowing interruptions.

| `sleepSeconds`                      | yes     | HazelcastTestSupport     | Sleeps for the specified number of seconds.

| `sleepAtMostSeconds`                | yes     | HazelcastTestSupport     | Sleeps up to a target end time, warning if already past.

| `sleepAndStop`                      | yes     | HazelcastTestSupport     | Sleeps up to a duration unless an AtomicBoolean flag is set, then sets it.

| `sleepAtLeastMillis`                | yes     | HazelcastTestSupport     | Guarantees sleeping at least the given milliseconds, even across interrupts.

| `sleepAtLeastSeconds`               | yes     | HazelcastTestSupport     | Alias in seconds for sleepAtLeastMillis.
|===

== Random Data & Names

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `generateRandomString`              | yes     | HazelcastTestSupport     | Builds a random lowercase ASCII string of given length.

| `randomString`                      | yes     | HazelcastTestSupport     | Returns a new unsecure UUID string.

| `randomMapName`                     | yes     | HazelcastTestSupport     | Returns a random UUID string as a map name (with optional prefix).

| `randomName`                        | yes     | HazelcastTestSupport     | Alias for `randomString()`.
|===

== Partition & Key Generation

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `randomNameOwnedBy`                 | yes     | HazelcastTestSupport     | Generates a random key whose partition is owned by the local member (with optional prefix).

| `randomPartitionOwnedBy`            | yes     | HazelcastTestSupport     | Picks a random partition that is locally owned by a given instance.

| `generateKeyOwnedBy` / `generateKeyNotOwnedBy` | yes | HazelcastTestSupport | Generates a key owned (or not) by the local member.

| `generateKeyForPartition`           | yes     | HazelcastTestSupport     | Generates a key mapping to a specific partition ID (with optional prefix).

| `generateKeysBelongingToSamePartitionsOwnedBy` | no  | HazelcastTestSupport | Generates multiple keys all belonging to the same owned partition.
|===

== Partition Table & Safe-State

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `warmUpPartitions`                  | yes     | HazelcastTestSupport     | Forces partition table initialization on instances.

| `isInstanceInSafeState`             | yes     | HazelcastTestSupport     | Checks whether a single instance’s partition state is safe.

| `isClusterInSafeState`              | yes     | HazelcastTestSupport     | Checks whether the entire cluster is in a safe partition state.

| `isAllInSafeState`                  | yes     | HazelcastTestSupport     | Verifies that all instances in a collection are safe.

| `waitInstanceForSafeState` / `waitClusterForSafeState` / `waitAllForSafeState` | yes | HazelcastTestSupport | Blocks until instance(s) reach safe state, with retry assertions.

| `assertAllInSafeState`              | yes     | HazelcastTestSupport     | Asserts (throws) if any instance is not in safe state.
|===

== Cluster Assertions

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `assertNoRunningInstances`         | yes     | HazelcastTestSupport     | Asserts that no Hazelcast server instances remain.

| `assertNoRunningClientInstances`   | yes     | HazelcastTestSupport     | Asserts that no Hazelcast client instances remain.

| `assertClusterSize` / `assertClusterSizeEventually` | yes | HazelcastTestSupport | Asserts cluster size immediately or eventually within timeout.

| `assertMasterAddress` / `assertMasterAddressEventually` | yes | HazelcastTestSupport | Asserts that all instances agree on the master address.

| `assertClusterState` / `assertClusterStateEventually` | yes | HazelcastTestSupport | Asserts the cluster state immediately or eventually.
|===

== General Assertions

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `assertContains` / `assertNotContains` / `assertContainsAll` / `assertNotContainsAll` | yes | HazelcastTestSupport | Collection- and string-based containment assertions.

| `assertStartsWith`                  | yes     | HazelcastTestSupport     | Asserts that one string starts with another (ComparisonFailure on fail).

| `assertPropertiesEquals`            | yes     | HazelcastTestSupport     | Asserts two Properties objects have identical keys and values.

| `assertInstanceOf`                  | yes     | HazelcastTestSupport     | Asserts and casts an object to a given class.

| `assertIterableEquals`              | yes     | HazelcastTestSupport     | Asserts an Iterable yields exactly the expected elements in order.
|===

== Time-Bound Assertions

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `assertCompletesEventually`        | yes     | HazelcastTestSupport     | Waits for a Future/FutureTask to complete within timeout.

| `assertSizeEventually` / `assertEqualsEventually` | yes | HazelcastTestSupport  | Waits until collections, maps, or values reach expected state.

| `assertTrueEventually` / `assertFalseEventually` | yes | HazelcastTestSupport | Retries assertions until success or failure within timeout.

| `assertTrueDelayed`                 | yes     | HazelcastTestSupport     | Delays for a fixed period, then asserts.

| `assertTrueAllTheTime` / `assertTrueFiveSeconds` | yes | HazelcastTestSupport | Continuously asserts a predicate over a duration.

| `assertCountEventually` / `assertAtomicEventually` | yes | HazelcastTestSupport | Waits for latch or atomic to reach an expected value.
|===

== Specialized Assertions

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `assertUtilityConstructor`         | yes     | HazelcastTestSupport     | Verifies a utility class has exactly one private constructor.

| `assertEnumCoverage`               | yes     | HazelcastTestSupport     | Asserts all enum values are handled via valueOf.

| `assertThrows`                     | yes     | HazelcastTestSupport     | Asserts that a given runnable throws a specific exception type.

| `assertBetween` / `assertGreaterOrEquals` | yes | HazelcastTestSupport | Numeric-range assertions.

| `assertExactlyOneSuccessfulRun`    | yes     | HazelcastTestSupport     | Retries a task until exactly one run succeeds or times out.

| `assertWaitingOperationCountEventually` | yes | HazelcastTestSupport | Waits until the parked operation count reaches an expected value.
|===

== Connection & Membership

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `closeConnectionBetween`           | yes     | HazelcastTestSupport     | Simulates network failure by closing connections between two instances.

| `suspectMember`                    | yes     | HazelcastTestSupport     | Marks one node as suspected by another, optionally with a reason.
|===

== Reflection & Cleanup

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `getFieldValue`                    | yes     | HazelcastTestSupport     | Reflectively retrieves a private field’s value from an object or class.

| `destroyAllDistributedObjects`     | yes     | HazelcastTestSupport     | Iterates over and destroys every DistributedObject on a given instance.

| `readFromMapBackup`                | no      | HazelcastTestSupport     | Reads a map value from its backup replica via a direct operation.

| `getMapOperationProvider`          | no      | HazelcastTestSupport     | Fetches the internal MapOperationProvider for a given map.
|===

== JUnit Assumptions

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `assumeThatNoWindowsOS`            | yes     | HazelcastTestSupport     | Assumes the test is not running on Windows.

| `assumeThatLinuxOS`                | yes     | HazelcastTestSupport     | Assumes Linux platform.

| `assumeNoArm64Architecture`        | yes     | HazelcastTestSupport     | Assumes non-ARM64 architecture.

|===

== Client Creation

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `createHazelcastClient`            | no      | JetTestSupport           | Creates a new Hazelcast client using a default factory configuration.

| `createHazelcastClient`            | no      | JetTestSupport           | Creates a new Hazelcast client using the given ClientConfig.

| `configForSingleMemberClientConnectingTo` | no | JetTestSupport      | Builds a ClientConfig targeting exactly one member (single-member routing).
|===

== Instance Creation Overrides

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `createHazelcastInstance`          | no      | JetTestSupport           | Creates a server instance with the small-instance default Jet config.

| `createHazelcastInstance`          | no      | JetTestSupport           | Creates a server instance with a given Config, optionally blocking specified addresses.

| `createHazelcastInstances`         | no      | JetTestSupport           | Creates multiple server instances with a given Config.
|===

== File & Directory Utilities

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `appendToFile`                     | yes     | JetTestSupport           | Appends one or more lines to an existing file, creating it if needed.

| `createTempDirectory`              | yes     | JetTestSupport           | Creates a temporary directory (deleted on JVM exit) and returns its File.
|===

== Jet Configuration Helpers

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `smallInstanceWithResourceUploadConfig` | yes | JetTestSupport         | Returns a small default Config with Jet resource-upload enabled.

| `defaultInstanceConfigWithJetEnabled` | yes   | JetTestSupport         | Returns a default Config with Jet enabled (no thread reduction).
|===

== Partition Assignment Utilities

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `getPartitionAssignment`            | yes     | JetTestSupport           | Builds a map of member-to-partition assignments for the current Jet cluster.

| `getAddressForPartitionId`          | no      | JetTestSupport           | Finds which member address owns a given partition ID, failing if none match.
|===

== Safe Spawn Utility

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `spawnSafe`                         | no      | JetTestSupport           | Wraps a RunnableEx in a safe thread that logs but swallows any thrown Throwable.
|===

== Cluster Cleanup & Job Teardown

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `cleanUpCluster`                    | no      | JetTestSupport           | Cancels all jobs on a cluster and destroys every DistributedObject.

| `ditchJob`                          | yes     | JetTestSupport           | Cancels a job and waits until it is no longer running on any member.

| `cancelAndJoin`                     | yes     | JetTestSupport           | Cancels a job and asserts that its `join()` throws CancellationException.
|===

== Pipeline Utilities

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin                   | Description

| `processorFromPipelineSource`       | yes     | JetTestSupport           | Extracts the internal ProcessorMetaSupplier from a BatchSource pipeline stage.

| `awaitSingleRunningJob`             | yes     | JetTestSupport           | Waits until exactly one Jet job is in RUNNING state and returns it.
|===

== TestHazelcastInstanceFactory Utilities

[cols="3,1,2,4",options="header"]
|===
| Method Name                                             | Static? | Origin                          | Description

| `getCount`                                              | no      | TestHazelcastInstanceFactory    | Returns the configured number of nodes/addresses.

| `newHazelcastInstance`                                | no      | TestHazelcastInstanceFactory    | Creates a new server instance using default or mock-network context. Various overloads available.

| `createAddressOrNull`                                   | yes     | TestHazelcastInstanceFactory    | Attempts to build an `Address`, returning `null` on `UnknownHostException`.

| `nextAddress()`                                         | no      | TestHazelcastInstanceFactory    | Returns the next pre-allocated or newly minted `Address` on default port.

| `nextAddress(int)`                                      | no      | TestHazelcastInstanceFactory    | Returns the next `Address` starting at a given initial port.

| `newInstances`                                        | no      | TestHazelcastInstanceFactory    | Creates as many instances as `count` using default or provided `Config`. Various overloads available.

| `newInstancesParallel`   | no      | TestHazelcastInstanceFactory    | Creates `nodeCount` instances in parallel, each with its own address and config.

| `getAllHazelcastInstances`                              | no      | TestHazelcastInstanceFactory    | Returns all live instances, mock-network or real.

| `getKnownAddresses`                                     | no      | TestHazelcastInstanceFactory    | Returns the unmodifiable list of all addresses this factory manages.

| `terminate(HazelcastInstance)`                          | no      | TestHazelcastInstanceFactory    | Terminates one instance and removes it from registry if mock-network.

| `shutdownAll()`                                         | no      | TestHazelcastInstanceFactory    | Shuts down all instances; clears registry or calls `Hazelcast.shutdownAll()`.

| `terminateAll()`                                        | no      | TestHazelcastInstanceFactory    | Terminates all instances; stops registry or calls `HazelcastInstanceFactory.terminateAll()`.

|===

== TestHazelcastFactory Extensions

[cols="3,1,2,4",options="header"]
|===
| Method Name                         | Static? | Origin               | Description

| `newHazelcastClient`              | no      | TestHazelcastFactory | Creates a new client in the mock-network setup. Various overloads available.

| `getHazelcastClientByName(String)`  | no      | TestHazelcastFactory | Retrieves a previously created client proxy by its name.

| `shutdownAllMembers()`              | no      | TestHazelcastFactory | Shuts down all server members via parent `shutdownAll()`.

| `shutdownAll()`                     | no      | TestHazelcastFactory | Shuts down all clients (mock-network or real) then all members.

| `terminateAll()`                    | no      | TestHazelcastFactory | Terminates all clients then all members.
|===
